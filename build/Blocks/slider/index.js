(()=>{"use strict";const e=window.wp.blocks,t=window.React,c=window.wp.blockEditor,l=window.wp.element,n=window.wp.data,r=window.wp.components,s=({currentSlide:e,innerBlocks:c,selectSlide:l,insertSlide:n})=>(0,t.createElement)(r.ButtonGroup,null,c?.map(((c,n)=>(0,t.createElement)(r.Button,{key:c.clientId,variant:c.clientId===e?"primary":"secondary",onClick:()=>l(c.clientId)},n+1))),(0,t.createElement)(r.Button,{variant:"secondary",onClick:n},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M18 11.2h-5.2V6h-1.6v5.2H6v1.6h5.2V18h1.6v-5.2H18z"})))),o=[["yard/slide"]],i=["yard/slide"],d=(window.wp.i18n,window.wp.hooks,window.wp.notices,{src:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},(0,t.createElement)("path",{d:"M224 272V224H448v48 80H224V272zm0-80V144 64H448v80 48H224zM464 32H448 224 208 192 160c-35.3 0-64 28.7-64 64v32 16 16 96 16 16 32c0 35.3 28.7 64 64 64h32 16 16H448h16 16 32c35.3 0 64-28.7 64-64V288 272 256 160 144 128 96c0-35.3-28.7-64-64-64H480 464zM160 64h32v64H128V96c0-17.7 14.3-32 32-32zm-32 96h64v48 48H128V160zm0 160V288h64v64H160c-17.7 0-32-14.3-32-32zm384 32H480V288h64v32c0 17.7-14.3 32-32 32zm32-96H480V208 160h64v96zm0-128H480V64h32c17.7 0 32 14.3 32 32v32zM32 112c0-8.8-7.2-16-16-16s-16 7.2-16 16V352c0 70.7 57.3 128 128 128H464c8.8 0 16-7.2 16-16s-7.2-16-16-16H128c-53 0-96-43-96-96V112z"})),foreground:"#00a49e"});(0,e.registerBlockType)("yard/slider",{edit:r=>{const{setAttributes:d,clientId:a}=r,[u,k]=(0,l.useState)(null),{currentBlockInnerBlocks:w}=(()=>{const{clientId:e}=(0,c.useBlockEditContext)(),t=(0,n.useSelect)((t=>t(c.store).getBlock(e))),r=(0,l.useMemo)((()=>{var e;return null!==(e=t.innerBlocks)&&void 0!==e?e:[]}),[t.innerBlocks]),s=(0,n.useSelect)((e=>e(c.store).getBlockAttributes(t.clientId))),o=(0,n.useSelect)((e=>e(c.store).hasSelectedInnerBlock(t.clientId,!0))),{updateBlockAttributes:i}=(0,n.useDispatch)(c.store),d=(0,l.useCallback)((e=>{r.forEach((t=>i(t.clientId,e)))}),[r,i]);return{currentBlock:t,currentBlockAttributes:s,currentBlockInnerBlocks:r,currentBlockHasSelectedInnerBlock:o,setAllCurrentBlockInnerBlocksAttributes:d}})(),B=(0,n.useSelect)((e=>e("core/block-editor").getSelectedBlockClientId())),{insertBlock:m,selectBlock:v}=(0,n.useDispatch)("core/block-editor"),p=()=>{const t=(0,e.createBlock)("yard/slide");m(t,w.length,a),k(t.clientId)},h=e=>{k(e),v(e)};return(0,l.useEffect)((()=>{w.length>0&&!u&&k(w[0].clientId)}),[w]),(0,l.useEffect)((()=>{d({activeSlide:u})}),[u]),(0,l.useEffect)((()=>{w.some((e=>e.clientId===B))&&k(B)}),[w,B]),(0,t.createElement)("div",{...(0,c.useBlockProps)()},(0,t.createElement)(s,{currentSlide:u,innerBlocks:w,selectSlide:h,insertSlide:p}),(0,t.createElement)(c.InnerBlocks,{renderAppender:!1,allowedBlocks:i,defaultBlock:i,template:o,templateLock:!1}),(0,t.createElement)(s,{currentSlide:u,innerBlocks:w,selectSlide:h,insertSlide:p}))},icon:d,save:()=>{const e=c.useBlockProps.save({className:"splide"});return(0,t.createElement)("div",{...e},(0,t.createElement)("div",{className:"splide__track"},(0,t.createElement)("ul",{className:"splide__list"},(0,t.createElement)(c.InnerBlocks.Content,null))))},providesContext:{"yard/slider-active-slide":"activeSlide"}})})();